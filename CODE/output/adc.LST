文件：adc.c        编译器版本 HGASM 0202 页次1


   1  0000              ; Generated by holtek-gcc v3.18, Fri May 31 17:54:44 2019
   2  0000              ; 
   3  0000              ; Configuration:
   4  0000              ;       with long instruction
   5  0000              ;       Single ROM, Multi-RAM
   6  0000              ;       bits_per_rom_unit:16
   7  0000              ;       with mp1
   8  0000              ;       with tbhp, address(0x9)
   9  0000              ;          Use tabrd-const
  10  0000              ;       
  11  0000              ; SFR address of long-instruction arch:
  12  0000              ;    mp0 = -1,1,0
  13  0000              ;    mp1 = 4,3,2
  14  0000              ;    mp2 = 14,13,12
  15  0000              ;    tbp = 9,7,8
  16  0000              ;    acc = 5
  17  0000              ;    pcl = 6
  18  0000              ;    status = 10
  19  0000              ;    bp = 11
  20  0000              ;    intc = 16
  21  0000              ;       
  22  0000              ;       
  23  0000              ; use 'tabrdc' instead of 'tabrd'
  24  0000              ;       
  25  0000              
  26  0000              #pragma translator "holtek-gcc 4.6.4" "3.18" "build 20130711"
  27  0000              ; Rebuild 828
  28  0000              
  29  0000              ir equ [2]
  30  0000              mp equ [3]
  31  0000              sbp equ [4]
  32  0000              acc equ [5]
  33  0000              bp equ [11]
  34  0000              tblp equ [7]
  35  0000              tbhp equ [9]
  36  0000              status equ [10]
  37  0000              c equ [10].0
  38  0000              ac equ [10].1
  39  0000              z equ [10].2
  40  0000              ov equ [10].3
  41  0000              cz equ [10].6
  42  0000              sc equ [10].7
  43  0000              intc equ [16]
  44  0000              
  45  0000              extern ra:byte
  46  0000              extern rb:byte
  47  0000              extern rc:byte
  48  0000              extern rd:byte
  49  0000              extern re:byte
  50  0000              extern rf:byte
  51  0000              extern rg:byte
  52  0000              extern rh:byte
  53  0000              extern _Crom2Prom:near
  54  0000              extern _Crom2PromNext:near
  55  0000              
  56  0000              RAMBANK 0 @BITDATASEC, @BITDATASEC1
  57  0000              @HCCINIT	.section 'data'
  58  0000              @HCCINIT0	.section 'data'
  59  0000              @BITDATASEC	 .section 'data'
文件：adc.ASM      编译器版本 HGASM 0202 页次2

  60  0000              @BITDATASEC1	 .section 'data'
  61  0000              
  62  0000              #pragma debug scope 1 1
  63  0000              	extern __DELAY3:near
  64  0000              	extern __DELAYX3:near
  65  0000              	extern __DELAYX6:near
  66  0000              	extern __DELAYY5:near
  67  0000              	extern __DELAYY3:near
  68  0000              	extern _builtin_holtek_delay_2:byte
  69  0000              ___sadc0 equ [66]
  70  0000              ___sadol equ [64]
  71  0000              ___sadoh equ [65]
  72  0000              public _ADC_Read
  73  0000              #pragma debug scope 2 1

   8  0000              #line 8 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
   8  0000              _ADC_Read .section 'code'
   8  0000              _ADC_Read proc
  12  0000              #line 12 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  12  0000  37C2        	clr [66].7
  13  0001              #line 13 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  13  0001  33C2        	set [66].7
  14  0002              #line 14 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  14  0002  37C2        	clr [66].7
  14  0003              _L2:
  15  0003              #line 15 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  15  0003  3B42        	snz [66].6
  15  0004  2800     R  	jmp _L9
  17  0005              #line 17 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  17  0005              ;# 17 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c" 1
  17  0005  0001        	clr wdt
  17  0006  2800     R  	jmp _L2
  17  0007              _L9:
  15  0007              #line 15 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  15  0007  0F08        	mov a,8
  15  0008  0080     E  	mov ra,a
  15  0009  1F00     E  	clr rb
  15  000A  1F00     E  	clr rc
  15  000B              _L7:
  23  000B              #line 23 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  23  000B  37C2        	clr [66].7
  24  000C              #line 24 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  24  000C  33C2        	set [66].7
  25  000D              #line 25 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  25  000D  37C2        	clr [66].7
  25  000E              _L4:
  26  000E              #line 26 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  26  000E  3B42        	snz [66].6
  26  000F  2800     R  	jmp _L10
  28  0010              #line 28 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  28  0010              ;# 28 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c" 1
  28  0010  0001        	clr wdt
  28  0011  2800     R  	jmp _L4
  28  0012              _L10:
  33  0012              #line 33 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  33  0012  0741        	mov a,[65]
  33  0013  0E0F        	and a,15
  33  0014  0080     E  	mov re,a
  33  0015  1F00     E  	clr rd
  31  0016              #line 31 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
文件：adc.c        编译器版本 HGASM 0202 页次3

  31  0016  0740        	mov a,[64]
  31  0017  0300     E  	add a,rd
  31  0018  0080     E  	mov rf,a
  31  0019  1F05        	clr acc
  31  001A  1300     E  	adc a,re
  31  001B  0080     E  	mov rg,a
  33  001C              #line 33 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  33  001C  0700     E  	mov a,rf
  33  001D  0380     E  	addm a,rb
  33  001E  0700     E  	mov a,rg
  33  001F  1380     E  	adcm a,rc
  33  0020  1780     E  	sdz ra
  33  0021  2800     R  	jmp _L7
  38  0022              #line 38 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  38  0022  0700     E  	mov a,rb
  38  0023  0080     E  	mov ra,a
  38  0024  0700     E  	mov a,rc
  38  0025  0080     E  	mov rb,a
  38  0026  0F03        	mov a,3
  38  0027              _LI1:
  38  0027  340A        	clr c
  38  0028  1B80     E  	rrc rb
  38  0029  1B80     E  	rrc ra
  38  002A  1785        	sdz acc
  38  002B  2800     R  	jmp _LI1
  38  002C  0003        	ret
  38  002D              _ADC_Read endp
  38  002D              #line 38 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  38  002D              #pragma debug scope 1 1
  38  002D              ___pa equ [20]
  38  002D              ___sadc1 equ [67]
  38  002D              public _GetBattery_Level
  38  002D              #pragma debug scope 3 1
  44  002D              #line 44 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  44  0000              _GetBattery_Level .section 'code'
  44  0000              _GetBattery_Level proc
  44  0000  0002[           local _GetBattery_Level_2 db 2 dup(?)	; 0,2
            00
            ]
  45  0002              #line 45 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  45  0000  3800     E  	snz _flag3[0].4
  45  0001  2800     R  	jmp _L12
  46  0002              #line 46 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  46  0002  3400     E  	clr _flag3[0].4
  48  0003              #line 48 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  48  0003  3294        	set [20].5
  49  0004              #line 49 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  49  0004  1F00     E  	clr _R_ADC_Count[0]
  50  0005              #line 50 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  50  0005  1F00     E  	clr _R_intADC_Sum[0]
  50  0006  1F00     E  	clr _R_intADC_Sum[1]
  51  0007              #line 51 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  51  0007  1F00     E  	clr _R_intADC_mot_sum[0]
  51  0008  1F00     E  	clr _R_intADC_mot_sum[1]
  52  0009              #line 52 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  52  0009  0F35        	mov a,53
  52  000A  0080     E  	mov _R_adc_channel[0],a
  53  000B              #line 53 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  53  000B  0F35        	mov a,53
  53  000C  00C2        	mov [66],a
文件：adc.c        编译器版本 HGASM 0202 页次4

  54  000D              #line 54 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  54  000D  0F04        	mov a,4
  54  000E  00C3        	mov [67],a
  55  000F              #line 55 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  55  000F  0F02        	mov a,2
  55  0010  2000     E  	call _Delay_100XuS
  56  0011              #line 56 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  56  0011  2000     R  	call _ADC_Read
  56  0012  0700     E  	mov a,ra
  56  0013  0080     E  	mov _R_intADC_Vbat[0],a
  56  0014  0700     E  	mov a,rb
  56  0015  0080     E  	mov _R_intADC_Vbat[1],a
  56  0016  2800     R  	jmp _L11
  56  0017              _L12:
  60  0017              #line 60 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  60  0017  0700     E  	mov a,_R_adc_channel[0]
  60  0018  0A30        	sub a,48
  60  0019  3D0A        	sz z
  60  001A  2800     R  	jmp _L15
  60  001B  0700     E  	mov a,_R_adc_channel[0]
  60  001C  0A35        	sub a,53
  60  001D  390A        	snz z
  60  001E  2800     R  	jmp _L18
  64  001F              #line 64 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  64  001F  3294        	set [20].5
  65  0020              #line 65 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  65  0020  0700     E  	mov a,_R_intADC_Sum[0]
  65  0021  0080     R  	mov _GetBattery_Level_2[0],a
  65  0022  0700     E  	mov a,_R_intADC_Sum[1]
  65  0023  0080     R  	mov _GetBattery_Level_2[1],a
  65  0024  2000     R  	call _ADC_Read
  65  0025  0700     E  	mov a,rb
  65  0026  0080     E  	mov rc,a
  65  0027  0700     E  	mov a,ra
  65  0028  0300     R  	add a,_GetBattery_Level_2[0]
  65  0029  0080     E  	mov rb,a
  65  002A  0700     R  	mov a,_GetBattery_Level_2[1]
  65  002B  1380     E  	adcm a,rc
  65  002C  0700     E  	mov a,rb
  65  002D  0080     E  	mov _R_intADC_Sum[0],a
  65  002E  0700     E  	mov a,rc
  65  002F  0080     E  	mov _R_intADC_Sum[1],a
  67  0030              #line 67 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  67  0030  0F30        	mov a,48
  67  0031  0080     E  	mov _R_adc_channel[0],a
  68  0032              #line 68 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  68  0032  0F30        	mov a,48
  68  0033  00C2        	mov [66],a
  69  0034              #line 69 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  69  0034  0F84        	mov a,132
  69  0035  00C3        	mov [67],a
  71  0036              #line 71 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  71  0036  1400     E  	inca _R_ADC_Count[0]
  71  0037  0080     E  	mov ra,a
  72  0038              #line 72 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  72  0038  0F07        	mov a,7
  72  0039  0200     E  	sub a,ra
  72  003A  380A        	snz c
  72  003B  2800     R  	jmp _L17
  71  003C              #line 71 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
文件：adc.c        编译器版本 HGASM 0202 页次5

  71  003C  0700     E  	mov a,ra
  71  003D  0080     E  	mov _R_ADC_Count[0],a
  71  003E  2800     R  	jmp _L11
  71  003F              _L17:
  73  003F              #line 73 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  73  003F  1F00     E  	clr _R_ADC_Count[0]
  74  0040              #line 74 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  74  0040  3000     E  	set _flag3[0].7
  76  0041              #line 76 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  76  0041  0F03        	mov a,3
  76  0042              _LI2:
  76  0042  340A        	clr c
  76  0043  1B80     E  	rrc rc
  76  0044  1B80     E  	rrc rb
  76  0045  1785        	sdz acc
  76  0046  2800     R  	jmp _LI2
  76  0047  0700     E  	mov a,rb
  76  0048  0080     E  	mov _R_intADC_Vbat[0],a
  76  0049  0700     E  	mov a,rc
  76  004A  0080     E  	mov _R_intADC_Vbat[1],a
  77  004B              #line 77 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  77  004B  0700     E  	mov a,rb
  77  004C  0080     E  	mov _get_calibration_2[0],a
  77  004D  0700     E  	mov a,rc
  77  004E  0080     E  	mov _get_calibration_2[1],a
  77  004F  2000     E  	call _get_calibration
  77  0050  0700     E  	mov a,ra
  77  0051  0080     E  	mov _R_intADC_Vbat[0],a
  77  0052  0700     E  	mov a,rb
  77  0053  0080     E  	mov _R_intADC_Vbat[1],a
  78  0054              #line 78 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  78  0054  1F00     E  	clr _R_intADC_Sum[0]
  78  0055  1F00     E  	clr _R_intADC_Sum[1]
  80  0056              #line 80 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  80  0056  0700     E  	mov a,_R_intADC_mot_sum[0]
  80  0057  0080     E  	mov ra,a
  80  0058  0700     E  	mov a,_R_intADC_mot_sum[1]
  80  0059  0080     E  	mov rb,a
  80  005A  0F03        	mov a,3
  80  005B              _LI3:
  80  005B  340A        	clr c
  80  005C  1B80     E  	rrc rb
  80  005D  1B80     E  	rrc ra
  80  005E  1785        	sdz acc
  80  005F  2800     R  	jmp _LI3
  80  0060  0700     E  	mov a,ra
  80  0061  0080     E  	mov _R_intADC_mot_i[0],a
  80  0062  0700     E  	mov a,rb
  80  0063  0080     E  	mov _R_intADC_mot_i[1],a
  81  0064              #line 81 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  81  0064  1F00     E  	clr _R_intADC_mot_sum[0]
  81  0065  1F00     E  	clr _R_intADC_mot_sum[1]
  81  0066  2800     R  	jmp _L11
  81  0067              _L15:
  88  0067              #line 88 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  88  0067  0700     E  	mov a,_R_intADC_mot_sum[0]
  88  0068  0080     R  	mov _GetBattery_Level_2[0],a
  88  0069  0700     E  	mov a,_R_intADC_mot_sum[1]
  88  006A  0080     R  	mov _GetBattery_Level_2[1],a
  88  006B  2000     R  	call _ADC_Read
文件：adc.c        编译器版本 HGASM 0202 页次6

  88  006C  0700     R  	mov a,_GetBattery_Level_2[0]
  88  006D  0300     E  	add a,ra
  88  006E  0080     E  	mov _R_intADC_mot_sum[0],a
  88  006F  0700     R  	mov a,_GetBattery_Level_2[1]
  88  0070  1300     E  	adc a,rb
  88  0071  0080     E  	mov _R_intADC_mot_sum[1],a
  88  0072  2800     R  	jmp _L19
  88  0073              _L18:
  95  0073              #line 95 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  95  0073  1F00     E  	clr _R_ADC_Count[0]
  96  0074              #line 96 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  96  0074  1F00     E  	clr _R_intADC_Sum[0]
  96  0075  1F00     E  	clr _R_intADC_Sum[1]
  97  0076              #line 97 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  97  0076  1F00     E  	clr _R_intADC_mot_sum[0]
  97  0077  1F00     E  	clr _R_intADC_mot_sum[1]
  97  0078              _L19:
  98  0078              #line 98 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  98  0078  0F35        	mov a,53
  98  0079  0080     E  	mov _R_adc_channel[0],a
  99  007A              #line 99 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
  99  007A  0F35        	mov a,53
  99  007B  00C2        	mov [66],a
 100  007C              #line 100 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
 100  007C  0F04        	mov a,4
 100  007D  00C3        	mov [67],a
 100  007E              _L11:
 100  007E  0003        	ret
 100  007F              _GetBattery_Level endp
 100  007F              #line 100 "F:\2_Source\NW1951_NW2018_20SOP 上海佳点 BBU 控制器-V00\CODE\source\adc.c"
 100  007F              #pragma debug scope 1 1
 100  007F              #pragma debug struct_end
 100  007F              #pragma debug struct_end
 100  007F              #pragma debug union_end
 100  007F              #pragma debug union_end
 100  007F              #pragma debug variable 43 1 ___pa "__pa" 1
 100  007F              #pragma debug variable 8 1 ___sadol "__sadol" 1
 100  007F              #pragma debug variable 8 1 ___sadoh "__sadoh" 1
 100  007F              #pragma debug struct_end
 100  007F              #pragma debug struct_end
 100  007F              #pragma debug union_end
 100  007F              #pragma debug union_end
 100  007F              #pragma debug variable 45 1 ___sadc0 "__sadc0" 1
 100  007F              #pragma debug struct_end
 100  007F              #pragma debug struct_end
 100  007F              #pragma debug union_end
 100  007F              #pragma debug union_end
 100  007F              #pragma debug variable 47 1 ___sadc1 "__sadc1" 1
 100  007F              
 100  007F              ; output external variables
 100  007F              extern _R_intADC_mot_i:byte
 100  007F              extern _R_intADC_Vbat:byte
 100  007F              extern _R_adc_channel:byte
 100  007F              extern _R_intADC_mot_sum:byte
 100  007F              extern _R_intADC_Sum:byte
 100  007F              extern _R_ADC_Count:byte
 100  007F              extern _flag3:byte
 100  007F              extern _Delay_100XuS:near
 100  007F              extern _get_calibration_2:byte
 100  007F              extern _get_calibration:near
文件：adc.c        编译器版本 HGASM 0202 页次7

 100  007F              
 100  007F              ; 
 100  007F              ; Generated by holtek-gcc v3.18, Fri May 31 17:54:44 2019
 100  007F              ; Rebuild 828
 100  007F              ; end of file


        0 Errors, 0